## 概述
这篇论文主要是介绍了基于RoCE v2实现的RDMA协议中基于PFC来做拥塞控制，同时介绍了PFC带来的一些问题以及解决方案。

## 精要
传统TCP/IP由于CPU负载高、延迟高，不能满足新一代DC工作负载，作者提出了基于PFC的DSCP，利用RoCEv2（融合以太网的RDMA）来代替TCP进行内部数据中心通信。我们验证了大规模运行的安全性和可扩展性。基于DCSP的优先级流控机制PFC来确保大规模部署，同时解决了很多安全挑战，比如活锁、死锁、PFC暂停风暴、慢接收者等问题，同时也建立了完善的监控和管理系统来确保RDM按照预期来工作。

- RoCE v2的实现：
  - RoCEv2在Ethernet/IPv4/UDP包中封装RDMA协议，使得RoCEv2和我们现成的网络基础设施相兼容，接收者UDP端口固定为4791。
  - PFC被用来防止缓冲区溢出，PFC标准规定了8个优先级种类，但是作者只使用了两个优先级，原因如下(我的理解：缓冲区加大了，PFC触发的阈值提高了)：
    - 8个优先级需要8个队列来分配缓冲区，我们利用两个队列来共享缓冲区。更大的buffer会提高XOFF阈值，保证更平顺的收发速率。
    - DC内部通信距离较短，但是ToR和leaf交换机buffer较浅（10MB左右），所以只够给两个无损的流量队列预留充足的headroom。
- 为什么需要流量控制？
  PFC会带来unfairness和victim flow问题，影响面太大
- 如何解决？
  引入基于流量的控制，作者选择DCQCN，本质上是利用ECN进行拥塞预告，它能够对中间交换机的队列长度进行响应，并且所有交换机都支持ECN。(DSQCN能够尽可能维持队列长度在较低的水平，但是依然阻止不了PFC的产生。)
- DSCP如何实现
  略
- PFC带来的一些挑战
  - livelock：原因是丢包导致不断触发go-back-0，解决办法是使用go-back-N代替go-back-0
  - deadlock：
